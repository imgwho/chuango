<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<meta name="format-detection" content="telephone=no"/>
<meta http-equiv="Cache-Control" content="no-transform"/> 
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no" />

<script type="text/javascript">
  //原来是在微信易信执行Ready之前，先注册事件，所以放在所有请求的最前面
  document.addEventListener("WeixinJSBridgeReady", function () {
      audioAutoPlay('Jaudio');//给个全局函数
  }, false);
  document.addEventListener('YixinJSBridgeReady', function() {
      audioAutoPlay('Jaudio');//给个全局函数
  }, false);
  </script>

<title>川货出川上北京</title>
<link href="./src/EasySlide.css" rel="stylesheet">
<script src="./src/EasySlide.js"></script>
<script src="./src/loader.js"></script>
<script src="./src/ppt.js"></script>
<script src="./src/effects.js"></script>
<style>
body{margin:0;padding:0;border:none;font-family:Arial;-webkit-text-size-adjust:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-ms-touch-action:none;-webkit-font-smoothing:antialiased;-webkit-user-select:none;-webkit-touch-callout:none;-ms-user-select:none;background:#060a10;color:#ffcf83;}
@keyframes bottomArrow{
0%{opacity:0;}
50%{-webkit-transform:translate3d(0,-15px,0);opacity:1;}
100%{-webkit-transform:translate3d(0,-25px,0);opacity:0;}
}
.back-icon{width:54px;height:31px;bottom:40px;right:0;background:url(images/back.png) no-repeat;background-size:100%;}
#arrow{width:100%;position:absolute;bottom:0;height:35px;background:url(images/arrow.png) center center no-repeat;background-size:37px;animation:bottomArrow 1.5s ease infinite;}

div#loading{margin:15px auto 0;}
.shareImgWrap{display:none;}

#weixin_bg{position:absolute;left:0;top:0;width:100%;height:100%;z-index:998;background:rgba(0,0,0,.6);display:none;}
.share_icon{clear:both; padding:10px; text-align:right;}
#loadingWrap{position:absolute;left:0;top:0;width:100%;height:100%;z-index:999;font-size:14px; line-height:20px; -webkit-transition:-webkit-transform 0.4s ease;background:#060a10;}
#loadingWrap div{margin:170px auto 0; text-align:center;}

#panda-img{position: absolute;left:30%;top: 30%;width: 37%;}
#gif{position: absolute;left: 45%;top: 50vh;}
#load-text{position: absolute;left:38%;top: 60%;color: #000;margin: 0;}

#wrapAll{position:relative; overflow:hidden;}
#wrapAll > .slides{width:100%; height:100%; position:absolute; top:0; left:0; -webkit-transition:-webkit-transform 0.5s ease; overflow:hidden;}
.groups{display:none;}
.groups .animate{opacity:0;}
.groups > div{position:absolute;font-size:15px;line-height:22px; font-weight:bold;}


#frame0{background:url(images/01.jpg) no-repeat center center;background-size:100%;}
.img00{width:100%;height:300px;background:url(images/01_1.png) no-repeat center center;background-size:350px;top:50%;margin: -30vh 0;}
.img01{z-index:2; width:100%;height:50px;background: url(images/01_2.png) no-repeat center top;background-size:50px;top:50%;margin-top:
calc(-30vh + 195px);}
.img02{animation: fadeout 2s ease-in-out ; width:100%;height:397px;background: url(images/01_3.png) no-repeat center top;background-size:250px;top:50%;margin-left:110px;margin-top: calc(-30vh + 205px);}
.img03{width:100%;height:98px;background:url(images/01_4.png) no-repeat center center;background-size:300px;bottom:30px; left: 14px;}

#frame1{background:url(images/03.jpg) no-repeat center top;background-size:100%;}

.shareBtns{width:100%;}
.shareBtns > div{border:1px solid #f3c178;color:#f3c178;text-align:center;padding:5px;margin:5px 0;font-size:14px;background:rgba(255,255,255,.1);}
.clearfix:after{content:".";display:block;height:0;visibility:hidden;clear:both;}
.clearfix{zoom:1;}
.flayer{display:none;}
.narrowLayer{width:85%;left:7.5%;height:100%;box-sizing:border-box;padding:50px 0 40px;}
.flayerInner{background:-webkit-gradient(linear,left top,left bottom, from(rgba(125,134,158,0)),color-stop(0.15,rgba(125,134,158,1)),color-stop(0.8,rgba(125,134,158,1)),to(rgba(125,134,158,0)));height:100%;}

.shareLayer, #chuanzhi, #chuanjiu, #chuancha, #chuansi, #chuanguo, #chuanwei{width:100%;height:100%;background:#060a10 url(images/03.jpg) no-repeat center top;background-size:100%;display:none;}
.shareLayer > div{position:absolute;}

.img3-1{position: absolute; width:81%;top:25px;left:41px;}
.img3-2{position: absolute; width:40%;top:142px;left:46px;}
.img3-3{position: absolute; width:40%;top:158px;left:194px;}
.img3-4{position: absolute; width:50%;top:288px;left:36px;}
.img3-5{position: absolute; width:40%;top:291px;left:201px;}
.img3-6{position: absolute; width:50%;top:400px;left:45px;}

/* 菜单页面 */
.newyear{position: absolute;width: 80%; transform:scale(.8);left: 50px;bottom: 37px;}
.img3-1-1{position: absolute; width:94%;top:-13px;left:41px;}
.img3-2-1{position: absolute; width:68%;top:11vh;left:46px;}
.img3-3-1{position: absolute; width:40%;top:158px;left:194px;}
.img3-4-1{position: absolute; width:50%;top:288px;left:36px;}
.img3-5-1{position: absolute; width:40%;top:291px;left:201px;}
.img3-6-1{position: absolute; width:100%;bottom:2vh;left:1px;}
.img3-7-1{position: absolute; width:79%;bottom:50vh;left:45px;}

.hide{opacity:0;}
.chuansi-pic{width: 60%;position: absolute;left: 20%;top: 18%;}

.watch{position: absolute; width:100px;height: 100px;background:url(images/skip.png) no-repeat;background-size:100%;bottom: 98px;left:231px;}

@keyframes fadeout { from { transform: translateY(150px); opacity: 0; } to { transform: none; opacity: 1; } }
@keyframes rotate { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
@keyframes goto {
  from {
    left: 65px;
    top: 386px;
  }
  to {
    transform: none;
  }
}

#panda{background:url(./imgs/public/all/bg1.jpg) no-repeat center top;background-size:100%;}
.p3-img{position: absolute;top: 10%;}
/* .p3logo{width: 50%; margin: -9vh 27vw;animation: pulse 1.5s ease 1s infinite normal forwards;} */
.p3logo{width: 50%; margin: -9vh 27vw;}
.p3panda{width:75%;margin: 22vh 12vw;}
.p3earth{width: 92%;margin: 19vh 5vw;animation: 100s rotate linear infinite;}

#chuango{background:url(images/02.jpg) no-repeat center top;background-size:100%;}
.line{position: absolute;width: 80%; transform:scale(.55);left: 59px;top: 231px;}
.airplane{position: absolute;width: 36%;animation: goto 2s ease-in-out;left: 214px; top: 242px;}

#map{background:url(images/maps.jpg) no-repeat center top;background-size:100%;}
.flayer {display: none;}
.img-pic{width: 100%;}
.map1{width: 10%; position: absolute;top: 10vh;margin: -7vh 20vw;}
.map2{width: 10%; position: absolute;top: 10vh;margin: 63vh 53vw;}
.map3{width: 10%; position: absolute;top: 10vh;margin: -7vh 66vw;}

.map4{width: 100%; position: absolute;bottom: 0;}


#framemap1{width: 80%;position: absolute;top: 10vh;margin: 1vh 7vw;}
#framemap2{width: 90%;position: absolute;top: 10vh;margin: 46vh 5vw;}
#framemap3{width: 80%;position: absolute;top: 10vh;margin: 0vh 13vw;}


#qrcode{background:url(images/03.jpg) no-repeat center top;background-size:100%;}
.qrcode-pic{width: 67%; position: absolute;top: 50%; margin: -27vh 17vw;}
.qrcode-text{width: 100%;position: absolute;top: 50%;  margin: 16vh 39vw; color: red;}
.qrcode-text2{width: 100%;position: absolute;top: 50%;  margin: 21vh 17vw; color: red;}
.qrcode-text-text{width: 67%; position: absolute;top: 50%;margin: 41vh 17vw;}
</style>
</head>
<body>
    <audio id="Jaudio" class="media-audio" src="http://game.163.com/weixin/gfxm3_gc/images/bg.mp3" preload loop="loop">
    </audio>
<!-- <div class="shareImgWrap"><img src="images/cover.jpg"/></div> -->
<div class="EasySlide-warp" id="wrapAll">
  
  <!--
    每个大的frame，里面包含若干个group，也就是用户上划下划，有可能是frame里面的各个group切换
    每个group里面包含若干元素，有动画的元素拥有animate的属性
    每个元素出来、消失的动画定义在in和out属性里，动画执行的先后顺序靠时间delay来标识
    group上面的allowswipe标志，表示是否允许用户通过上下滑动来进行切换
    allowswipe为prev表示只能去上一张，next为只能去下一张，no为禁止上下滑动切换
    goto属性表明这是一个跳转的链接，点击直接跳转到某个frame
    flayerbtn属性表示点击之后出浮层，对应浮层的id记录在layerid属性里
    className里面有flayer属性，表示本身是浮层；triggerLayer表示触发这个浮层显示的flayerbtn，这个属性只在需要通过浮层找到源触发器的情况下才使用到
  -->
  <div id="frame0" index="0" class="EasySlide-slides slides">
    <div class="EasySlide-groups groups" gIndex="0">
      <div class="img00"></div>
      <div class="img01 EasySlide-animate" in="pulse" delay="3s" duration="1.5s" iteration="infinite" goto="1" style="animation: pulse 1.5s ease 1s infinite normal forwards;"></div>
      <div class="img02"></div>
      <div class="img03"></div>
    </div>
  </div>

  <!-- 文字快闪 -->
  <div id="frame0" index="1" class="EasySlide-slides slides">
    <div class="EasySlide-groups groups" gIndex="0">
      <h1 class="img3-1-1 hide" style="animation: mypulse 1.5s ease 0s 1 normal forwards;">2018川货新春大拜年、我们来了！来了！来了！</h1>
      <h2 class="img3-2-1 hide" style="animation: mypulse 1.5s ease 1s 1 normal forwards;">川酒、郎酒、邓家老坛</h2>
      <h3 class="img3-3-1 hide" style="animation: mypulse 1.5s ease 2s 1 normal forwards;">川茶、竹叶青、碧潭飘雪、邛崃文君、绿毛尖、绿毛峰、花毛峰、潘西苦荞</h3>
      <h3 class="img3-4-1 hide" style="animation: mypulse 1.5s ease 3s 1 normal forwards;">川药、川贝、川白芍、川母、川白芷</h3>
      <h3 class="img3-5-1 hide" style="animation: mypulse 1.5s ease 4s 1 normal forwards;">川果、雷波脐橙、都江堰猕猴桃、广安蜜梨、早钟枇杷、蒲江丑柑</h3>
      <h3 class="img3-6-1 hide" style="animation: mypulse 1.5s ease 5s 1 normal forwards;">川味、南溪豆腐干、琥珀核桃、五彩土豆、二荆条辣椒、自贡井盐、保宁醋、思坡醋、中坝酱油、川菜、豆花蘸水、腊肉香肠、灯影牛肉、酱腌菜、缠丝兔、牛油火锅、水煮肉片、麻婆豆腐、夫妻肺片、鱼香肉丝、回锅肉！</h3>
      <h1 class="img3-7-1 hide" style="animation: mypulse 1.5s ease 6s 1 normal forwards;">我们等你!等你!</h1>
    </div>
  </div>

  <div id="frame1" index="2" class="EasySlide-slides slides">
    <div class="EasySlide-groups groups" gIndex="0">
      <!-- <img src="./images/new.png" class="newyear" /> -->
      <img src="./images/03_1.png" class="img3-1 hide" goto="3" style="animation: mypulse 1.5s ease 0s 1 normal forwards;"/>
      <img src="./images/03_2.png" class="img3-2 hide" goto="4" style="animation: mypulse 1.5s ease 1s 1 normal forwards;"/>
      <img src="./images/03_3.png" class="img3-3 hide" goto="5" style="animation: mypulse 1.5s ease 2s 1 normal forwards;"/>
      <img src="./images/03_4.png" class="img3-4 hide" goto="6" style="animation: mypulse 1.5s ease 3s 1 normal forwards;"/>
      <img src="./images/03_5.png" class="img3-5 hide" goto="7" style="animation: mypulse 1.5s ease 4s 1 normal forwards;"/>
      <img src="./images/03_6.png" class="img3-6 hide" goto="8" style="animation: mypulse 1.5s ease 5s 1 normal forwards;"/>
      
       <div class="watch EasySlide-animate" in="pulse" delay="1s" duration="1.5s" iteration="infinite" goto="9"></div>
       <!--
      <div class="EasySlide-flayer flayer shareLayer" id="frame6l2" EasySlide-triggerLayer="desktopAlbum">
        <img src="./images/new.png" class="newyear" />
        <div id="subppt1"></div>
        <div class="back-icon"></div>
      </div> -->
      
    </div>
  </div>

  <div id="chuanzhi" index="3" class="EasySlide-slides slides">
    <div class="EasySlide-groups groups" gIndex="0">
      <img src="./images/new.png" class="newyear" />
      <div style="position:absolute;width:100%;top:18%;left:0;" id="subppt1"></div>
      <div class="back-icon" goto="2"></div>
    </div>
  </div>

  <div id="chuanjiu" index="4" class="EasySlide-slides slides">
    <div class="EasySlide-groups groups" gIndex="0">
      <img src="./images/new.png" class="newyear" />
      <div style="position:absolute;width:100%;top:18%;left:0;" id="subppt2"></div>
      <div class="back-icon" goto="2"></div>
    </div>
  </div>

  <div id="chuancha" index="5" class="EasySlide-slides slides">
    <div class="EasySlide-groups groups" gIndex="0">
      <img src="./images/new.png" class="newyear" />
      <div style="position:absolute;width:100%;top:18%;left:0;" id="subppt3"></div>
      <div class="back-icon" goto="2"></div>
    </div>
  </div>

  <div id="chuansi" index="6" class="EasySlide-slides slides">
    <div class="EasySlide-groups groups" gIndex="0">
      <img src="./images/new.png" class="newyear" />
      <!-- <div style="position:absolute;width:100%;top:18%;left:0;" id="subppt4"></div> -->
      <img src="./images/541.png" alt="" class="chuansi-pic">
      <div class="back-icon" goto="2"></div>
    </div>
  </div>

  <div id="chuanguo" index="7" class="EasySlide-slides slides">
    <div class="EasySlide-groups groups" gIndex="0">
      <img src="./images/new.png" class="newyear" />
      <div style="position:absolute;width:100%;top:18%;left:0;" id="subppt5"></div>
      <div class="back-icon" goto="2"></div>
    </div>
  </div>

  <div id="chuanwei" index="8" class="EasySlide-slides slides">
    <div class="EasySlide-groups groups" gIndex="0">
      <img src="./images/new.png" class="newyear" />
      <div style="position:absolute;width:100%;top:18%;left:0;" id="subppt6"></div>
      <div class="back-icon" goto="2"></div>
    </div>
  </div>

  <!-- 熊猫拜年 -->
   <div id="panda" index="9" class="EasySlide-slides slides">
    <div class="EasySlide-groups groups" gIndex="0">
      <img class="p3-img p3logo" style="animation: panda 2.5s ease 0s 1 normal forwards;" src="./imgs/public/P 300/logo11.png" alt="">
      <img class="p3-img p3panda" style="animation: panda 2.5s ease 0s 1 normal forwards;" src="./imgs/public/P 300/p3panda.png" alt="">
      <img class="p3-img p3earth" src="./imgs/public/P 300/earth.png" alt="">
    </div>
  </div>

  <!-- 飞机  -->
 
 <div id="chuango" index="10" class="EasySlide-slides slides">
    <div class="EasySlide-groups groups" gIndex="0">
      <img src="./images/line.png" class="line" />
      <img src="./images/airplane.png" class="airplane" />
    </div>
  </div>

  <!-- 北京地图 -->
  <div id="map" index="11" class="EasySlide-slides slides">
    <div class="EasySlide-groups groups" gIndex="0">
      <img class="img-pic map1 hide" layerid="framemap1" src="imgs/public/P 600/gps_01.png" alt="" style="animation: mypulse 1.5s ease 1s 1 normal forwards;">
      <img class="img-pic map2 hide" layerid="framemap2" src="imgs/public/P 600/gps_02.png" alt="" style="animation: mypulse 1.5s ease 2s 1 normal forwards;">
      <img class="img-pic map3 hide" layerid="framemap3" src="imgs/public/P 600/gps_03.png" alt="" style="animation: mypulse 1.5s ease 3s 1 normal forwards;">

      <img class="img-pic map4 hide" layerid="framemap3" src="images/map4.png" alt="" style="animation: mypulse 1.5s ease 4s 1 normal forwards;">
    </div>

    <img id="framemap1" onclick="baidu('http://api.map.baidu.com/marker?location=39.964919,116.295514&title=川货商圈&content=金源新燕莎MALL&output=html&src=四川商投|myApp')" class="EasySlide-flayer flayer framemap" src="imgs/public/P 600/gps01.png" alt="" style="animation: mypulse 1.5s ease 0s 1 normal forwards;">
    <img id="framemap2" onclick="baidu('http://api.map.baidu.com/marker?location=39.815811,116.351487&title=川货农产品市场&content=北京新发地农产品批发市场&output=html&src=四川商投|myApp')" class="EasySlide-flayer flayer framemap" src="imgs/public/P 600/gps02.png" alt="" style="animation: mypulse 1.5s ease 0s 1 normal forwards;">
    <img id="framemap3" onclick="baidu('http://api.map.baidu.com/marker?location=39.967159,116.351388&title=川货展销中心&content=北京二商集团四道口专业市场&output=html&src=四川商投|myApp')" class="EasySlide-flayer flayer framemap" src="imgs/public/P 600/gps03.png" alt="" style="animation: mypulse 1.5s ease 0s 1 normal forwards;">
  </div>

  <!-- 二维码  -->
  <div id="qrcode" index="12" class="EasySlide-slides slides">
    <div class="EasySlide-groups groups" gIndex="0">
      <img class="qrcode-pic" src="images/qrcode.jpg" alt="">
      <!-- <img class="qrcode-text" src="images/qrcode-text.png" alt=""> -->
      <h2 class="qrcode-text">扫码关注</h2>
      <h3 class="qrcode-text2">川货新春大拜年 官方微信公众号</h3>
      <img class="qrcode-text-text" src="images/text.png" alt="">
    </div>
  </div>


  

  
  
  <div id="arrow"></div>
  <div id="weixin_bg"><p class="share_icon"><img src="images/share.png" width="100" /></p></div>
</div>


<div id="loadingWrap">
  <img id="bg" src="./imgs/public/all/bg1.jpg" alt="">
  <div>
    <img id="panda-img" src="./imgs/public/all/IFS Panda.png" alt="">
    <br/><img id="gif" src="./imgs/public/all/loading.gif" alt="">
    <h2 id="load-text">loading...</h2>
  </div>
  <div id="loading">0%</div>
</div>

</body>
<script>
  function baidu(url) {
      console.log(url);
      window.location.href = url
    }

  function audioAutoPlay(id) {//全局控制播放函数
    var audio = document.getElementById(id),
      play = function () {
        audio.play();
        document.removeEventListener("touchstart", play, false);
      };
    audio.play();
    document.addEventListener("touchstart", play, false);
  }

  var resourceImg = [
    "01.jpg", "01_1.png", "01_2.png", "01_3.png",
    "02.jpg", "03.jpg", "03_1.png", "03_2.png", "03_3.png", 
    "03_4.png", "03_5.png", "03_6.png", "04.png", "05.png",
    "511.png", "512.png", "513.png", "521.png", "522.png", 
    "523.png", "531.png", "532.png", "533.png", "541.png",
    "551.png", "552.png", "553.png", "561.png", "562.png", "563.png",
    "airplane.png", "arrow.png", "cover.jpg", "line.png", "new.png", "back.png", "share.png",
    "maps.jpg", "gps_01.png", "gps_02.png", "gps_03.png", "gps01.png", "gps02.png", "gps03.png","map4.png"
  ];


  // var page = new EasySlide({
  //   wrapAll: "wrapAll",
  //   subpptObjects: [{
  //     wrapDiv: "subppt1",
  //     imgs: ["images/511.png", "images/512.png", "images/513.png", "images/521.png", "images/522.png", "images/523.png",
  //     "images/531.png", "images/532.png", "images/533.png", "images/541.png", "images/551.png", "images/552.png", "images/553.png",
  //     "images/561.png", "images/562.png", "images/563.png"],
  //     parentNum: 1
  //   }]
  // });

  var page = new EasySlide({
      wrapAll: "wrapAll",
      subpptObjects: [{
        wrapDiv: "subppt1",
        imgs: ["images/511.png", "images/512.png", "images/513.png", "images/blank.png"],
        parentNum: 3
      }]
    })

    new EasySlide({
      wrapAll: "wrapAll",
      subpptObjects: [{
        wrapDiv: "subppt2",
        imgs: ["images/521.png", "images/522.png", "images/523.png", "images/blank.png"],
        parentNum: 4
      }]
    })

    new EasySlide({
      wrapAll: "wrapAll",
      subpptObjects: [{
        wrapDiv: "subppt3",
        imgs: ["images/531.png", "images/532.png", "images/533.png", "images/blank.png"],
        parentNum: 5
      }]
    })

    // new EasySlide({
    //   wrapAll: "wrapAll",
    //   subpptObjects: [{
    //     wrapDiv: "subppt4",
    //     imgs: ["images/541.png", "images/blank.png", "images/blank.png"],
    //     parentNum: 5
    //   }]
    // })
  

    new EasySlide({
      wrapAll: "wrapAll",
      subpptObjects: [{
        wrapDiv: "subppt5",
        imgs: ["images/551.png", "images/552.png", "images/553.png", "images/blank.png"],
        parentNum: 7
      }]
    })

    new EasySlide({
      wrapAll: "wrapAll",
      subpptObjects: [{
        wrapDiv: "subppt6",
        imgs: ["images/561.png", "images/562.png", "images/563.png", "images/blank.png"],
        parentNum: 8
      }]
    })
  

  var utils = EasySlide.utils;
  var arrow = utils.$('arrow');
  var gif = utils.$('gif');
  
  page.loader(resourceImg.map(function(item){
    return 'images/'+item;
  }));

  page.on('progress',function(percent){
    // console.log(percent);
    utils.$('loading').innerHTML = percent + '%';
    utils.show(gif);
  });

  page.on('loaded',function(){
    utils.hide(utils.$('loadingWrap'));
    page.goto(0);
  });

  page.on('slide-switchEnd',function(allowswipe){
    // console.log(allowswipe);
    if (allowswipe === "no" || allowswipe === "prev") {
      utils.hide(arrow);
    } else {
      utils.show(arrow);
    }
  });

  // utils.bind(utils.$('shareWeiboBtn'),'click',function(e){
  //   e.stopPropagation();
  //   utils.shareWeibo({
  //     shareImg:'images/cover.jpg' 
  //   });
  // });

  var shareCircleBtn = utils.$('shareCircleBtn');
  var sharewxbg = utils.$('weixin_bg');

  if (utils.isWeixin()) {
    //如果是微信，显示分享到微信按钮
    //分享图需要自己隐藏
    utils.bind(shareCircleBtn, "click", function() {
      utils.show(this);
    });
    utils.bind(sharewxbg, "click", function() {
      utils.hide(this);
    });
  } else {
    utils.remove(shareCircleBtn);
  }
  
  // document.querySelector('body').addEventListener('click', function() {
  //   modelArray.forEach(function(model){
  //     model.style.display = 'none';
  //   }, false);
  // })

  // const modelCtrlArray = document.querySelectorAll('img[mylayerid]');
  // const modelArray = Array.from(document.querySelectorAll('.framemap'));
  // modelCtrlArray.forEach(function(item, currentIndex) {
  //   item.addEventListener('click', function(e) {
  //     e.stopPropagation();
  //     modelArray.forEach(function(model, index) {
  //       if (currentIndex === index) {
  //         model.style.display = 'block';
  //       } else {
  //         model.style.display = 'none';
  //       }
  //     })
  //   }, false)
  // })
</script>
</html>
